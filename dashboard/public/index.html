<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheapShot</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800;900&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
        }

        canvas {
            display: block;
            cursor: pointer;
        }

        /* UI Overlay - buttons */
        .ui-overlay {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 16px;
            z-index: 100;
            opacity: 0;
            transition: opacity 1s ease-out 2s;
        }

        .ui-overlay.visible {
            opacity: 1;
        }

        .btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-family: 'Inter', sans-serif;
        }

        .btn svg {
            width: 18px;
            height: 18px;
        }

        .btn-primary {
            background: #ff2d2d;
            color: white;
        }

        .btn-primary:hover {
            background: #e02525;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 45, 45, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .footer {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #333;
            z-index: 100;
        }

        @media (max-width: 600px) {
            .ui-overlay {
                flex-direction: column;
                width: calc(100% - 40px);
                bottom: 40px;
            }

            .btn {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>

    <div class="ui-overlay" id="ui">
        <button class="btn btn-primary" id="add-btn">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026c.462-.62.874-1.275 1.226-1.963.021-.04.001-.088-.041-.104a13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028zM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38z" />
            </svg>
            Add to Discord
        </button>
        <button class="btn btn-secondary" id="login-btn">Dashboard â†’</button>
    </div>

    <div class="footer">Â© 2025 skmredacted</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let particles = [];
        let mouse = { x: null, y: null, radius: 150 };
        let animationPhase = 0;
        let startTime = Date.now();

        // Resize handler
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initParticles();
        }

        // Particle class
        class Particle {
            constructor(x, y, color, size = 2) {
                // Target position (where it should form)
                this.targetX = x;
                this.targetY = y;

                // Current position (start scattered)
                this.x = Math.random() * width;
                this.y = Math.random() * height;

                // Velocity
                this.vx = 0;
                this.vy = 0;

                // Properties
                this.color = color;
                this.baseSize = size;
                this.size = size;
                this.alpha = 0;
                this.targetAlpha = 1;

                // Physics
                this.friction = 0.95;
                this.ease = 0.08 + Math.random() * 0.04;

                // Floating offset
                this.floatPhase = Math.random() * Math.PI * 2;
                this.floatSpeed = 0.5 + Math.random() * 0.5;
                this.floatRadius = 1 + Math.random() * 2;
            }

            update(time) {
                // Move towards target
                const dx = this.targetX - this.x;
                const dy = this.targetY - this.y;

                this.vx += dx * this.ease;
                this.vy += dy * this.ease;

                this.vx *= this.friction;
                this.vy *= this.friction;

                this.x += this.vx;
                this.y += this.vy;

                // Add floating motion once formed
                if (animationPhase >= 1) {
                    const float = Math.sin(time * 0.001 * this.floatSpeed + this.floatPhase);
                    this.x += Math.cos(this.floatPhase) * float * 0.3;
                    this.y += Math.sin(this.floatPhase) * float * 0.3;
                }

                // Mouse interaction
                if (mouse.x !== null) {
                    const mdx = this.x - mouse.x;
                    const mdy = this.y - mouse.y;
                    const dist = Math.sqrt(mdx * mdx + mdy * mdy);

                    if (dist < mouse.radius) {
                        const force = (mouse.radius - dist) / mouse.radius;
                        const angle = Math.atan2(mdy, mdx);
                        this.vx += Math.cos(angle) * force * 3;
                        this.vy += Math.sin(angle) * force * 3;
                    }
                }

                // Fade in
                this.alpha += (this.targetAlpha - this.alpha) * 0.02;

                // Pulse size slightly
                this.size = this.baseSize + Math.sin(time * 0.003 + this.floatPhase) * 0.3;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color.replace('1)', `${this.alpha})`);
                ctx.fill();
            }
        }

        // Sample pixels from text/shape
        function getTextPixels(text, fontSize, fontWeight, offsetY = 0) {
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');

            tempCanvas.width = width;
            tempCanvas.height = height;

            tempCtx.fillStyle = '#fff';
            tempCtx.font = `${fontWeight} ${fontSize}px Inter, sans-serif`;
            tempCtx.textAlign = 'center';
            tempCtx.textBaseline = 'middle';
            tempCtx.fillText(text, width / 2, height / 2 + offsetY);

            const imageData = tempCtx.getImageData(0, 0, width, height);
            const pixels = [];
            const gap = 4; // Sample every N pixels

            for (let y = 0; y < height; y += gap) {
                for (let x = 0; x < width; x += gap) {
                    const i = (y * width + x) * 4;
                    if (imageData.data[i + 3] > 128) {
                        pixels.push({ x, y });
                    }
                }
            }

            return pixels;
        }

        // Get pixels for a rectangle (card outline)
        function getRectPixels(rx, ry, rw, rh, gap = 6) {
            const pixels = [];

            // Top and bottom edges
            for (let x = rx; x < rx + rw; x += gap) {
                pixels.push({ x, y: ry });
                pixels.push({ x, y: ry + rh });
            }

            // Left and right edges
            for (let y = ry; y < ry + rh; y += gap) {
                pixels.push({ x: rx, y });
                pixels.push({ x: rx + rw, y });
            }

            return pixels;
        }

        // Get pixels for a circle (icon)
        function getCirclePixels(cx, cy, radius, gap = 5) {
            const pixels = [];

            for (let angle = 0; angle < Math.PI * 2; angle += gap / radius) {
                pixels.push({
                    x: cx + Math.cos(angle) * radius,
                    y: cy + Math.sin(angle) * radius
                });
            }

            // Fill center with some particles
            for (let r = gap; r < radius; r += gap * 1.5) {
                for (let angle = 0; angle < Math.PI * 2; angle += gap / r) {
                    if (Math.random() > 0.5) {
                        pixels.push({
                            x: cx + Math.cos(angle) * r,
                            y: cy + Math.sin(angle) * r
                        });
                    }
                }
            }

            return pixels;
        }

        // Get pixels for lightning bolt icon
        function getLightningPixels(cx, cy, size) {
            const pixels = [];
            const points = [
                { x: 0, y: -1 },
                { x: -0.5, y: 0.1 },
                { x: 0.1, y: 0.1 },
                { x: -0.2, y: 1 },
                { x: 0.5, y: -0.1 },
                { x: -0.1, y: -0.1 },
                { x: 0, y: -1 }
            ];

            const gap = 3;
            for (let i = 0; i < points.length - 1; i++) {
                const p1 = points[i];
                const p2 = points[i + 1];
                const steps = 20;

                for (let t = 0; t < 1; t += 1 / steps) {
                    pixels.push({
                        x: cx + (p1.x + (p2.x - p1.x) * t) * size,
                        y: cy + (p1.y + (p2.y - p1.y) * t) * size
                    });
                }
            }

            return pixels;
        }

        // Initialize all particles
        function initParticles() {
            particles = [];

            const isMobile = width < 600;
            const titleSize = isMobile ? 48 : Math.min(120, width * 0.1);
            const taglineSize = isMobile ? 14 : 18;

            // Main title: "CheapShot"
            const titlePixels = getTextPixels('CheapShot', titleSize, 800, -60);
            titlePixels.forEach(p => {
                particles.push(new Particle(p.x, p.y, 'rgba(255, 255, 255, 1)', 2));
            });

            // Tagline
            const taglinePixels = getTextPixels('AI-powered Discord bot', taglineSize, 700, titleSize * 0.4);
            taglinePixels.forEach(p => {
                particles.push(new Particle(p.x, p.y, 'rgba(100, 100, 100, 1)', 1.5));
            });

            // Lightning bolt icon above title
            const iconY = height / 2 - 60 - titleSize * 0.6 - 50;
            const boltPixels = getLightningPixels(width / 2, iconY, 30);
            boltPixels.forEach(p => {
                particles.push(new Particle(p.x, p.y, 'rgba(255, 45, 45, 1)', 2.5));
            });

            // Circle around icon
            const circlePixels = getCirclePixels(width / 2, iconY, 45, 4);
            circlePixels.forEach(p => {
                particles.push(new Particle(p.x, p.y, 'rgba(255, 45, 45, 1)', 2));
            });

            // Feature cards (only on desktop)
            if (!isMobile) {
                const cardWidth = 200;
                const cardHeight = 80;
                const cardY = height / 2 + titleSize * 0.6 + 80;
                const cardGap = 30;
                const totalWidth = cardWidth * 4 + cardGap * 3;
                const startX = (width - totalWidth) / 2;

                const features = ['ðŸ¤– AI Chat', 'ðŸ›¡ï¸ Moderation', 'ðŸŽ¨ Images', 'âš¡ Management'];

                features.forEach((text, i) => {
                    const cardX = startX + i * (cardWidth + cardGap);

                    // Card outline
                    const rectPixels = getRectPixels(cardX, cardY, cardWidth, cardHeight, 8);
                    rectPixels.forEach(p => {
                        particles.push(new Particle(p.x, p.y, 'rgba(255, 45, 45, 0.3)', 1.5));
                    });

                    // Card text
                    const textCanvas = document.createElement('canvas');
                    const textCtx = textCanvas.getContext('2d');
                    textCanvas.width = width;
                    textCanvas.height = height;
                    textCtx.font = '600 14px Inter';
                    textCtx.textAlign = 'center';
                    textCtx.fillStyle = '#fff';
                    textCtx.fillText(text, cardX + cardWidth / 2, cardY + cardHeight / 2 + 5);

                    const imgData = textCtx.getImageData(0, 0, width, height);
                    for (let y = 0; y < height; y += 3) {
                        for (let x = 0; x < width; x += 3) {
                            const idx = (y * width + x) * 4;
                            if (imgData.data[idx + 3] > 128) {
                                particles.push(new Particle(x, y, 'rgba(200, 200, 200, 1)', 1.2));
                            }
                        }
                    }
                });
            }

            // Add ambient floating particles
            for (let i = 0; i < 100; i++) {
                const p = new Particle(
                    Math.random() * width,
                    Math.random() * height,
                    'rgba(255, 45, 45, 0.5)',
                    1 + Math.random() * 2
                );
                p.targetAlpha = 0.3 + Math.random() * 0.3;
                p.floatRadius = 5 + Math.random() * 10;
                particles.push(p);
            }
        }

        // Animation loop
        function animate() {
            const time = Date.now();
            const elapsed = time - startTime;

            // Update animation phase
            animationPhase = Math.min(1, elapsed / 3000);

            // Clear with fade effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
            ctx.fillRect(0, 0, width, height);

            // Update and draw particles
            particles.forEach(p => {
                p.update(time);
                p.draw();
            });

            // Show buttons after animation
            if (elapsed > 2000) {
                document.getElementById('ui').classList.add('visible');
            }

            requestAnimationFrame(animate);
        }

        // Mouse events
        canvas.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        canvas.addEventListener('mouseleave', () => {
            mouse.x = null;
            mouse.y = null;
        });

        // Touch support
        canvas.addEventListener('touchmove', e => {
            e.preventDefault();
            mouse.x = e.touches[0].clientX;
            mouse.y = e.touches[0].clientY;
        });

        canvas.addEventListener('touchend', () => {
            mouse.x = null;
            mouse.y = null;
        });

        // Init
        window.addEventListener('resize', resize);
        resize();
        animate();

        // Button handlers
        const CLIENT_ID = '1447587559604486417';
        const REDIRECT = encodeURIComponent(location.origin + '/callback');
        const OAUTH = `https://discord.com/oauth2/authorize?client_id=${CLIENT_ID}&response_type=code&redirect_uri=${REDIRECT}&scope=${encodeURIComponent('identify guilds guilds.members.read')}`;
        const BOT = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&permissions=8&scope=bot%20applications.commands`;

        document.getElementById('add-btn').onclick = () => window.open(BOT, '_blank');
        document.getElementById('login-btn').onclick = () => location.href = OAUTH;

        // Auto-redirect if logged in
        fetch('/api/auth/user', { credentials: 'include' })
            .then(r => r.ok && (location.href = '/dashboard.html'))
            .catch(() => { });
    </script>
</body>

</html>